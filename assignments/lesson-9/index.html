<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tri-city region information</title>
  <meta name="author" content="Holly Olson">
  <meta name="description" content="Information about the population and so forth of the tri-city area, including event.">
  <!-- external style references in the proper cascading order -->    
  <link href="https://fonts.googleapis.com/css?family=BioRhyme+Expanded|Source+Sans+Pro" rel="stylesheet">  <!-- Google API font reference -->
  <link href="styles/normalize.css" rel="stylesheet"> <!-- normalize useragent/browser defaults -->
  <link href="styles/main-7.css" rel="stylesheet">    <!-- default styles - small/phone views -->
  <link href="styles/medium-7.css" rel="stylesheet">  <!-- medium/tablet views -->
  <link href="styles/large-7.css" rel="stylesheet">   <!-- large/wide/desktop views --> 
  </head>
<body>

  <header>
    <img src="images/logo.jpg" alt="The site logo" width="75" height="75">
    <h1>Weather Watchers</h1>
    <h3>Weather Conditions for<br>Tri-City area</h3>
  </header>
   
  <button class="hamburger" onclick="toggleHam()">&#9776;</button>
  <nav>
    <ul class="navigation">
      <li><a class="active" href="index.html">Home</a></li>
      <li><a href="franklin-7.html">Franklin</a></li>
    	<li><a href="#">Greenville</a></li>
    	<li><a href="#">Springfield</a></li>
    	<li><a href="stormcenter.html">Storm Center</a></li>
    	<li><a href="gallery-7.html">Gallery</a></li>
    </ul>
  </nav>

      <hgroup>


      </hgroup>

     
     <section class="towninfo">

      
     </section>>

      <footer>
        <aside>
          Weather Watchers<br>
          125 Main St.<br>
          Franklin, Mu 83454<br>
          (999)999-9999<br>
          contract@uri.com
        </aside>
        <p class="footer-bar">&copy;2018 All Rights Reserved | Weather Watchers | <span id="currentdate">Current Date Placeholder</span></p>
      </footer>
         
        <script src="scripts/hamburger7.js"></script>
        <script src="scripts/currentdate7.js"></script>

    <script>

    // grab reference for header and store as a variable
    var header = document.querySelector('hgroup');

    // grab reference for section and store as a variable
    var section = document.querySelector('section.towninfo');

   // store the URL of the JSON we want to retrieve in a variable
 var requestURL = 'http://smilindaisygal.github.io/assignments/lesson-9/data/towndata.json';
    
 // create a new request object instance from the XMLHttpRequest constructor, using the new keyword
 var request = new XMLHttpRequest();

 // open a new request using the open() method
 request.open('GET', requestURL);

 // setting the responseType to JSON, so that XHR knows that the server will be returning JSON,
 // and that this should be converted behind the scenes into a JavaScript object
 request.responseType = 'json';
 request.send();

 // waiting for the response to return from the server, then dealing with it
 request.onload = function() {

//  Here we are storing the response to our request (available in the response property) in a variable
// called superHeroes; this variable will now contain the JavaScript object based on the JSON! 
 var townData = request.response;
 populateHeader(townData);
 showTowns(townData);
 }

 // Function to populate the Header
 function populateHeader(jsonObj) {
 var myH1 = document.createElement('h1');
 myH1.textContent = jsonObj['name'];
 header.appendChild(myH1);

//  var myPara = document.createElement('p');
//     myPara.textContent = 'Hometown: ' + jsonObj['homeTown'] + ' // Formed: ' + jsonObj['formed'];
//     header.appendChild(myPara);

 }

 // creates and displays the superhero cards
 function showTowns(jsonObj) {
 var towns = jsonObj['towns'];
   
 for (var i = 0; i < towns.length; i++) {
 var myArticle = document.createElement('article');
 var myH2 = document.createElement('h2');
 var myPara1 = document.createElement('p');
 var myPara2 = document.createElement('p');
 var myPara3 = document.createElement('p');
 var myPara4 = document.createElement('p');
 var myPara5 = document.createElement('p');
 var myList = document.createElement('ul');

 myH2.textContent = towns[i].name;
 myPara1.textContent = 'Motto: ' +  towns[i].motto;
 myPara2.textContent = 'Year Founded: ' +  towns[i].yearFounded;
 myPara3.textContent = 'Current Population:' +  towns[i].currentPopulation;
 myPara4.textContent = 'Average Rainfall:' +  towns[i].averageRainfall;
 myPara5.textContent = 'Events:';
     
 var localEvents = towns[i].events;
 for (var j = 0; j < localEvents.length; j++) {
   var listItem = document.createElement('li');
   listItem.textContent = localEvents[j];
   myList.appendChild(listItem);
 }

 myArticle.appendChild(myH2);
 myArticle.appendChild(myPara1);
 myArticle.appendChild(myPara2);
 myArticle.appendChild(myPara3);
 myArticle.appendChild(myPara4);
 myArticle.appendChild(myPara5);
 myArticle.appendChild(myList);

 section.appendChild(myArticle);
}
}


    
    </script>
  </body>
</html